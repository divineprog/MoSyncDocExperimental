<html><head><title>The Essential Guide for Developing Apps in HTML5/JavaScript</title></head><body><p>The MoSync SDK has rich capabilities for building complete applications in HTML5/JavaScript. You can access a wide range of device services and Native UI from JavaScript, and you can even extend your app with code written in C/C++ if needed. This guide tells you the essentials involved in authoring mobile applications using HTML5 and JavaScript. <!--break--></p><p>Want to get started quickly? Read the <a href="http://www.mosync.com/documentation/manualpages/getting-started-html5-and-javascript">Getting Started with HTML5 and JavaScript</a> guide, then come back here for a deeper look at HTML5 and JavaScript in the MoSync SDK.</p><p>[toc]</p><h2>MoSync support for HTML5 applications</h2><p>MoSync has a native widget system, and one of the widget types is the <strong>WebView </strong>widget. This means you can use web technologies to create your application, create a native application with HTML/CSS/JavaScript, and deploy it to the app stores as a standalone appliction. You can use established web standards and JavaScript libraries, such as jQuery, jQuery Mobile, and Sencha Touch. Furthermore, you can reuse your current web-based code when developing mobile apps.</p><p>You can code your entire application using HTML, CSS and JavaScript, or you can mix web technologies with C++, using MoSync C/C++ to access device functionality not available in HTML5. Depending on which langauges and libraries you wish to use, you can write all or most of the application logic in JavaScript, or you can write the application logic in C/C++ and use HTML and CSS for the user interface of the application.</p><h2>HTML5/JavaScript templates and example apps</h2><p>To get started quickly, <a href="http://www.mosync.com/documentation/manualpages/getting-started-html5-and-javascript">create a new project from one of the HTML5 templates</a>. This will give you an HTML5 project which is ready to build and run. MoSync's HTML5 templates are small working applications taht give you a starting point to modify and extend. Here is what the different templates do:</p><ul><li><strong>HTML5/JS WebUI Project</strong> - Gives you an app with the user interface in HTML/CSS, set up with libraries for accessing device functionality from JavaScript.</li><li><strong>HTML5/JS NativeUI Project</strong> - Gives you an app with a native user interface, written in HTML/JavaScript, set up with libraries for accessing device functionality from JavaScript.</li><li><strong>HTML5/JS/C++ Hybrid Project</strong> - This is like the HTML5/JS WebUI template app, but it is set up to show you how to extend your app with code written in C/C++.</li></ul><p>Another way to get started is to copy one of the HTML5 example applications and alter it. To copy a project is easy to do in Eclipse, just select the project you wish to copy in the Project Explorer, right click it and select <strong>copy</strong>. Then right click again and select <strong>paste</strong>.</p><h2>File system structure - drop your content in the LocalFiles folder</h2><p>When you have created an HTML5 project in Eclipse, you will see a folder called <em>LocalFiles</em>. This is where you put your HTML, CSS, JavaScript, and media files. LocalFiles is the root of all your web content. This is typically where <em>index.html</em> go.</p><p>This is the file system layout you get when creating an HTML5 template project.&nbsp;</p><p>[img_assist|nid=7948|title=|desc=|link=none|align=none|width=252|height=432]</p><p>The file <em>wormhole.js</em> contains the JavaScript libraries for accessing devices services and Native UI. This file is included in all template projects, so you can easily use Native UI from a Web UI project, if you should find out that you want to do that at some point. Note that wormhole.js consists of several JavaScript files concatenated together into one file.</p><p>The main HTML file and the starting point of the application is <em>index.html</em>. You can name this file anything you want, but if you change the name, also update the following line in <em>main.cpp</em> that opens the start page:</p>{syntaxhighlighter brush: cpp;fontsize: 100; first-line: 1; }showPage("index.html");{/syntaxhighlighter}<p>The file styles.css contain the style sheed definitions for the app. You can replace index.html and use any style sheet and JavaScript files you wish, but if you want to access device services, you need to include wormhole.js into your index.html file, and add the "deviceready" event listener in JavaScript:</p>{syntaxhighlighter brush: cpp;fontsize: 100; first-line: 1; }document.addEventListener("deviceready", displayDeviceInfo, true);{/syntaxhighlighter}<p>Study the sample index.html generated by the template for further details.</p><p>The <em>Resources</em> folder <em></em>contains data files that are packaged with the application. There is a build step called "Bundle", which takes the folders and files in LocalFiles and package them into a single file called <em>LocalFiles.bin</em> (note that LocalFiles.bin won't be created until you actually build the project, it isn't visible in the file list initally). In <em>Resources</em>, there is a file called <em>Resources.lst</em>, which specifyes which data to package with the application, and it includes <em>LocalFiles.bin</em>.</p><p>At runtime, when the application is launched, the contents of LocalFiles.bin is unpacked and copied to the application's local file system on the device. To speed up application launching, the system computes a checksum of the content in LocalFiles.bin, and only copies the data if this checksum has chanhed. If you have very many files, the first application launch may take some time, but subsequent launches will be fast. (There are hacks that can be done to display a splash screen during unpacking, but this is currently undocumented.)</p><p>The Resources folder also contains a sound file, <em>beep.wav</em>, which is used to play the system "beep" sound. You can replace this file with your own sound file, if you wish.</p><p>Finally, we have the file <em>main.cpp</em>, which contains the C++ code that that sets up the application and creates a WebView to display the HTML/CSS content and run JavaScript code. The basic class used in main.cpp is <strong>WebAppMoblet</strong>, which we subclass and application specific code to. (In MoSync, a moblet is a class that <a href="http://www.mosync.com/content/developing-event-driven-object-oriented-applications">handles events</a> in an application.) WebAppMoblet is a moblet designed to be used for web applications. It has one <strong>WebView </strong>widget that is displayed full-screen.&nbsp; It is hidden if you wish to use Native UI widgets only, the JavaScript code then runs in the hidden WebView.</p><p>For most HTML5 applications, you don't need to touch anything in main.cpp.</p><h2>Wormhole topology - Calling C/C++ from JavaScript</h2><p>In physics, a <a href="http://en.wikipedia.org/wiki/Wormhole">wormhole</a> is a shortcut through spacetime. In MoSync space, a wormhole connects JavaScript and C/C++. If you want to provide functionality that invokes C++ code from JavaScript, you can edit <em>main.cpp</em> to add that functionality. This is what the <strong>HTML5/JS/C++ Hybrid Project</strong> template application shows you how to do. In this project, the beep and vibrate actions are implemented in custom C/C++ code, rather than being called using the Wormhole library rutines. The details of MoSync wormholes are explained in the guide <a href="http://www.mosync.com/documentation/manualpages/how-communicate-between-javascript-and-c-mosync">Communicating Between JavaScript and C++ in MoSync</a>.</p><h2>Hints for making a web-based user interface</h2><p>Making cross-platform web-based user interfaces has always ben considered a challenge, first on desktop browsers, and now on mobile devices. The web is full with advice on how to develop mobile web apps, here we highlight some useful advice.</p><h3>Setting the viewport width</h3><p>A useful trick for controlling the initial zoom level is to set the width of the browser viewport the head section of the HTML-page, using the viewport meta tag. The following sets the width to 320 pixels and also prevents the page from being zoomed:</p>{syntaxhighlighter brush: xml;fontsize: 100; first-line: 1; }&lt;meta name="viewport" content="width=320, user-scalable=no"&gt;
{/syntaxhighlighter}<p>Further reading:</p><ul><li><a href="http://www.quirksmode.org/mobile/viewports.html">A tale of two viewports — part one</a></li><li><a href="http://www.quirksmode.org/mobile/viewports2.html">A tale of two viewports — part two</a></li><li><a href="http://www.quirksmode.org/blog/archives/2010/04/a_pixel_is_not.html">A pixel is not a pixel is not a pixel</a></li><li><a href="http://developer.android.com/guide/webapps/targeting.html">Android: Targeting Screens from Web Apps</a></li><li><a href="https://developer.apple.com/library/safari/#documentation/appleapplications/reference/safariwebcontent/usingtheviewport/usingtheviewport.html">Safari Web Content Guide: Configuring the Viewport</a></li><li><a href="http://www.w3.org/TR/mwabp/#bp-viewport">W3C: Use Meta Viewport Element To Identify Desired Screen Size</a></li></ul><h3>Using em's as measurement unit</h3><p>Another trick is to use em's as the unit for page elements and font sizes. One em is equal to the size of the current font size, and thus scale between different screen sizes. For example, in your style sheet, you can use:</p>{syntaxhighlighter brush: css;fontsize: 100; first-line: 1; }font-size: 1.4em;{/syntaxhighlighter}<p>Search the web for mobile application development with HTML and CSS and you will find a vast source of information. Keep in mind, however, as HTML5/CSS evolve and new platforms enter the market, best practices for user interfade design and layout may be revised.</p><h2>Building and deploying your application</h2><p>The guide<a href="http://www.mosync.com/documentation/manualpages/getting-started-html5-and-javascript"> Getting Started with HTML5 and JavaScript</a> shows you how to build and run HTML5 applications on various platforms, using the MoSync Eclipse IDE.</p><h2>Example programs</h2><p>MoSync includes several HTML5 example programs. These programs illustrate different approaches to using HTML/JavaScript in MoSync applications:</p><ul><li><strong>WormholeDemo</strong> shows you how to build an app using a JavaScript UI library. The UI is in HTML/CSS, and the application logic is in JavaScript. This app uses the Wormhole C++ library and wormhole.js.</li><li><strong>WormholeNativeUIDemo</strong> shows you how to build an app that has a Native UI, using a JavaScript. The app uses the Wormhole C++ library and wormhole.js.</li><li><strong>WebViewLoveSMS</strong> and <strong>WebViewTwitter</strong> have HTML/CSS user interfaces, and show how to use the Wormhole C++ library to handle calls from JavaScript to C/C++. These examples use the file<em> mosync-bridge.js</em>, which is part of wormhole.js, but they don't use the full wormhole.js library. When you want to implement as much as possible of your app in HTML5/JavaScript you will want to use the full wormhole.js library, so WormholeDemo is then likely to be a better starting point than these apps. But if you wish to implement the application's functionality in C/C++, these apps are a good reference.</li><li><strong>NFCExample</strong> is an example that has the purpose of demonstrating NFC (Near Field Communication). It is a C++ app that has an HTML/CSS user interface. (NFC is currently available only on Android.)</li><li><strong>WebViewGeoLocation</strong> shows how to use a WebView at the most basic level. This example does not use any high-level libraries, and is provided as a reference for how low-level JavaScript to C/C++ communication mechanisms work.</li></ul><h2>Adding an application icon</h2><p>To make your app have an nice icon, you need to have two files in your project. One XML-file with a .icon extension, for example <strong>App.icon</strong>, and one SVG file with the actual icon image. If your SVG file is named <strong>Icon.svg</strong>, this is the content of App.icon:</p>{syntaxhighlighter brush: xml;fontsize: 100; first-line: 1; }&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;icon&gt;
    &lt;instance size="default" src="Icon.svg" /&gt;
&lt;/icon&gt;
{/syntaxhighlighter}<p>When you rebuild the program in Eclipse, it will be added to the resulting application package.</p><p>There are several programs available for creating <a href="http://www.mosync.com/documentation/manualpages/adding-application-icons">SVG-images</a>, for example the open-source drawing program <a href="http://inkscape.org/">Inkscape</a>.</p><p>More details can be found in the <a href="http://www.mosync.com/documentation/manualpages/adding-application-icons">Application Icons</a> guide.</p></body></html>